<?php

	class Hb_Mapper_Billing_BillingReportCommentType extends Hb_Mapper_Mapper
	{
		/**
		 * Primary key
		 *
		 * @var string 
		 */
		protected $primary_key = "armc_comment_type_id";
	
		/**
		 * Table name
		 *
		 * @var string 
		 */	
		protected $table = "armc_comment_type";
		
		/**
		 * Builds and returns the relevent domain object for this mapper
		 *
		 * @param $row object Result row from the Zend_Db framework 
		 * @return object An instance of the relevent domain object
		 */	
		protected function doBuildObject($row)
		{			
			return new Hb_App_Billing_BillingReportCommentType($row->armc_comment_type_id, $row->armc_comment_type_description);		
		}
		
		/**
		 * Builds and returns a Zend_Db Select object
		 *
		 * @return $row object Result Select object from the Zend_Db framework 
		 */	
		protected function GetBaseSelect()
		{
			$db = Hb_Util_Db_Connection::GetInstance(); 
	      $select = $db->select(); 
	             	 	 	 	 	          	 	 	 	 
			$select->from('armc_comment_type', array(		
														'armc_comment_type_id', 	
														'armc_comment_type_description'																									
														));
			         
	      return $select; 				
		}
		
		/**
		 * Finds a armc file type by it's Id
		 *
		 * @param $id int The record identifier that uniquely identifies the row.
		 * @return obj Result row from the Zend_Db framework 
		 */			
		protected function doFindById($id)
		{
			$select = $this->GetBaseSelect();        
	    	$select->where('armc_comment_type_id = ?', $id);				
	             
	    	return $this->getRow($select); 						
		}
		
		/**
		 * Saves a dirty domain object to the persistence layer
		 *
		 * @param $obj object Instance of the relevent domain object
		 */				
		protected function doSave(Hb_App_Object $obj)
		{				
			$data = array(
				'armc_comment_type_id'				=> $obj->GetTypeId(),
				'armc_comment_type_description'  => $obj->GetTypeDescription()
				);
				
			
			$db = Hb_Util_Db_Connection::GetInstance();
							
			if (is_null($obj->GetId())) 
			{
				
				$db->insert('armc_comment_type', $data);
				
				$obj->SetTypeId ($db->lastInsertId());
			} 
			else 
			{
				$db->update('armc_comment_type', $data, 'armc_comment_type_id = ' . $obj->GetId());	
			}
			
		}
		
	
		
	}

?>