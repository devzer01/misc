<?php

/**
 * Abstract Object for Attribute Collections, 
 * 
 * @copyright 2007 Global Market Insite Inc
 * @author Nayana
 * @version 1.0
 * @package App
 * @todo Extend from Hb_App_Collection
 *
 */

abstract class Hb_App_Attributes extends Hb_App_Object implements Iterator
{

	private $__attributes = array();
	
	public function AddItem(Hb_App_Object $item)
	{
		$this->AddAttribute($item);
	}
	
	public function AddAttribute(Hb_App_Attribute $attribute)
	{
		if (isset($this->__attributes[$attribute->GetAttributeName()])) {
			throw new Hb_Data_ObjectInCollectionException("Attribute Already Exists In Collection " . $attribute->GetAttributeName(), HB_DATA_EXCEPTION_ATTR_IN_COLLECTION);
		}
		
		$this->__attributes[$attribute->GetAttributeName()] = $attribute;
	}

	/**
	 * 
	 *
	 * @param unknown_type $name
	 * @return Hb_Data_Attribute
	 */
	public function GetAttribute($name)
	{
		if (!isset($this->__attributes[$name])) {
			throw new Hb_Data_ObjectNotInCollectionException("Requested Attribute Not Found", HB_DATA_EXCEPTION_ATTR_NOT_IN_COLLECTION);
		}
		
		return $this->__attributes[$name];
	}
	
	/**
	 * Enter description here...
	 *
	 */
	public function Rewind() 
	{
       		reset($this->__attributes);
   	}

   /**
    * Enter description here...
    *
    * @return unknown
    */
   public function Current() {
       return current($this->__attributes);
   }

   /**
    * Enter description here...
    *
    * @return unknown
    */
   public function Key() {
       return key($this->__attributes);
   }

   /**
    * Enter description here...
    *
    * @return unknown
    */
   public function Next() {
       return next($this->__attributes);
   }

   /**
    * Enter description here...
    *
    * @return unknown
    */
   public function Valid() {
       return $this->current() !== false;
   }
	
	function __clone()
   {
   	foreach ($this->__attributes as $name => $attr) {
   		$this->__attributes[$name] = clone $attr;
   	}
   }
   
}
?>
